@using Byte.Blog.Framework.Web
@model global::Byte.Blog.Rendering.Models.EntryViewModel
@{
    Layout = "~/Areas/Rendering/Views/Shared/_Layout.cshtml";
}

<div class="entry" data-page-slug="@Model.PageSlug" data-entry-slug="@Model.Slug" data-published-at-utc="@Model.PublishedAtUtc">
    <h2>@Model.Title</h2>
    <h6 class="published-at-utc muted pull-right"></h6>
    <div class="hrule"></div>
    <div>
        @Html.Raw(Model.Body)
    </div>
    @Html.Partial("Disqus")
</div>

@section FooterScripts {

    <script src="@Url.Content("~/rendering/assets/scripts/EntryView.js")" type="text/javascript"></script>
    
    <script type="text/javascript">

        $(document).ready(function () {

            window.disqus_developer = @(MvcApplication.EnvironmentType == EnvironmentType.Development ? '1' : '0');

            var publishedAtUtc = new Date($('.entry').data('published-at-utc'));
            $('.published-at-utc').text(publishedAtUtc.toLocaleDateString() + ' ' + publishedAtUtc.toLocaleTimeString());

            return new window.EntryView({ 
                el: $('.entry')
            });

        });

    </script>
}